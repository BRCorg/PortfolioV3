@startuml Diagramme de Cas d'Utilisation - Portfolio V2

left to right direction
skinparam packageStyle rectangle

' ====================================
' ACTEURS
' ====================================

actor "Visiteur" as visitor
actor "Administrateur" as admin

' ====================================
' SYSTÈME
' ====================================

rectangle "Portfolio V2" {

    ' --- Cas d'utilisation VISITEUR ---
    package "Espace Public" {
        usecase "Consulter la page d'accueil" as UC1
        usecase "Voir les projets" as UC2
        usecase "Consulter détails projet" as UC3
        usecase "Filtrer projets par catégorie" as UC4
        usecase "Voir les compétences" as UC5
        usecase "Envoyer un message" as UC6
        usecase "Consulter le CV" as UC7
    }

    ' --- Cas d'utilisation ADMIN ---
    package "Authentification" {
        usecase "Se connecter" as UC10
        usecase "Vérifier code 2FA" as UC11
        usecase "Utiliser code de backup" as UC12
        usecase "Se déconnecter" as UC13
    }

    package "Gestion 2FA" {
        usecase "Activer 2FA" as UC14
        usecase "Scanner QR Code" as UC15
        usecase "Sauvegarder codes backup" as UC16
        usecase "Désactiver 2FA" as UC17
    }

    package "Gestion des Projets" {
        usecase "Lister les projets" as UC20
        usecase "Créer un projet" as UC21
        usecase "Modifier un projet" as UC22
        usecase "Supprimer un projet" as UC23
        usecase "Upload image projet" as UC24
        usecase "Associer compétences" as UC25
        usecase "Définir projet vedette" as UC26
    }

    package "Gestion des Catégories" {
        usecase "Lister catégories" as UC30
        usecase "Créer catégorie" as UC31
        usecase "Modifier catégorie" as UC32
        usecase "Supprimer catégorie" as UC33
    }

    package "Gestion des Compétences" {
        usecase "Lister compétences" as UC40
        usecase "Créer compétence" as UC41
        usecase "Modifier compétence" as UC42
        usecase "Supprimer compétence" as UC43
        usecase "Définir niveau compétence" as UC44
    }

    package "Gestion des Messages" {
        usecase "Consulter messages" as UC50
        usecase "Marquer comme lu" as UC51
        usecase "Répondre par email" as UC52
    }

    package "Dashboard" {
        usecase "Voir statistiques" as UC60
        usecase "Voir derniers messages" as UC61
        usecase "Gérer profil" as UC62
    }
}

' ====================================
' RELATIONS VISITEUR
' ====================================

visitor --> UC1
visitor --> UC2
visitor --> UC3
visitor --> UC4
visitor --> UC5
visitor --> UC6
visitor --> UC7

' ====================================
' RELATIONS ADMIN
' ====================================

' Authentification
admin --> UC10
admin --> UC13

UC10 ..> UC11 : <<include>>
UC11 ..> UC12 : <<extend>>

' 2FA
admin --> UC14
admin --> UC17
UC14 ..> UC15 : <<include>>
UC14 ..> UC16 : <<include>>

' Projets
admin --> UC20
admin --> UC21
admin --> UC22
admin --> UC23
UC21 ..> UC24 : <<include>>
UC21 ..> UC25 : <<extend>>
UC22 ..> UC24 : <<extend>>
UC22 ..> UC25 : <<extend>>
UC22 ..> UC26 : <<extend>>

' Catégories
admin --> UC30
admin --> UC31
admin --> UC32
admin --> UC33

' Compétences
admin --> UC40
admin --> UC41
admin --> UC42
admin --> UC43
UC41 ..> UC44 : <<include>>
UC42 ..> UC44 : <<include>>

' Messages
admin --> UC50
admin --> UC51
UC50 ..> UC52 : <<extend>>

' Dashboard
admin --> UC60
UC60 ..> UC61 : <<include>>
admin --> UC62

' ====================================
' NOTES
' ====================================

note right of UC11
  Code à 6 chiffres
  TOTP (30 secondes)
  Google Authenticator
end note

note right of UC24
  Validation :
  - JPG, PNG, WebP
  - Max 5MB
  - Redimensionnement auto
end note

note right of UC6
  Envoi email via
  PHPMailer (SMTP)
  + Protection anti-spam
end note

@enduml
